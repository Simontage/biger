# Linux用户和权限
我们回忆一下操作系统的组成，操作系统最底层的是硬件 向上是内核（真正 的操作系统），内核把计算功能通过各种系统调用向上提供，这些调用过于底层，所有一些人把这些调用做成了库，库分为静态库和动态库，库也是二进制程序但是不能独立执行，必须要被其他程序调用才行。我们平时所说的安装操作系统实际上是安装到硬盘等外部设备，应用程序在硬盘上时叫做程序，运行时在内存中就叫做进程

系统上的文件和计算能力叫做**计算资源**，我们可以设定这些计算资源能被那些人进行访问，定义了资源和文件的访问能力叫做**权限**

**安全上下文（secure context）** 任何时候用户操作计算机就是发起进程，进程是用户操作计算机的代理，进程在运行的时候是以发起它的用户的身份在运行，所以这个进程到底能访问那些文件的取决于这个进程的权限和访问的文件的权限


## 文件的权限
在linux每一个文件都有三类权限，分别为用户权限，用户组权限，其他用户权限，而每一类用户都有三种权限分为读，写，执行三种权限。没有权限的使用-表示

**对于文件来说**

r：可以使用类似cat的命令查看文本内容

w：可以编辑或删除文件

x：可以命令提示符下当做命令提交给内核

**对于目录而言**

r：可以对此目录执行ls以列出内的所有文件

w：可以在此目录创建文件

x：可以使用cd切换进此目录，也可以使用ls -l查看内部文件的详细信息

000---：无权限 0

001--x：执行 1

010-w-：写 2

011-wx：写和执行 3

100r--：读 4

101r-x：读和执行 5

110rw-：读写 6

111rwx：读写执行 7

755表示rwxr-xr-x

rw-r-----可以用640来表示文件的权限

## ID

操作系统通过数字来识别用户和进程，每一个用户在系统上有一个被称为用户ID(UID)的代码来标识用户，每一个组也有一个组ID(GID)来标示。系统会根据后台内部数据库(/etc/passwd,/etc/group)将用户名和组**解析**为ID号码，用户的密码存在于/etc/shadow，组的密码存放于/etc/gshadow

## 用户类别

用户被分成为管理员和普通用户，普通用户被分为系统用户和一般用户，使用ID号进行区别

管理员的ID号是0，普通用户从1-65535，系统用户1-499，一般用户500-60000

系统用户是用于允许系统的某些后台服务进程，不允许登录系统

## 用户组类别

**私有组**在创建用户时如果没有指定用户所属的组，系统会自动为其创建一个只包含该用户的与用户名相同的组

**基本组**用户的默认组

**附加组/额外组**默认组之外的其他组

## /etc/passwd

account：登录名

password：密码占位符

UID:

GID：基本组ID

GECOS：用户注释信息可选

HOME DIR：家目录

shell：默认shell(/etc/shells)

## /etc/shadow

account：登录名

encrypted password：已加密密码 1表示MD5加密 密码前面有两个！！不允许登录

**数据的加密方法**

对称加密：加密解密使用同一个密码

公钥加密：每个密码都成对出现，一个为私钥(secret key)，一个公钥(public key)

单向加密(散列加密、指纹加密)：提取数据特征码，常用于数据完整性校验，具有雪崩(蝴蝶)效应，定长输出特性。其中定长输出常用的有MD5和SHA1，MD5是128位定长输出，SHA1是160位定长输出

## 添加用户

使用useradd命令添加用户，useradd USERNAME。 /etc/default/useradd存放了默认配置的命令

## /etc/group

用户名:密码:UID:以本组为附加组的用户列表

添加组：groupadd GROUPNAME