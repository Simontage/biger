# DNS和Bind

DNS是Domain Name Service的缩写，dns是一个应用层协议，使用C/S架构，使用的udp和tcp的53端口。BIND(Bekerley Internat Name Domain)是dns的实现，由ISC维护。

本地名称解析配置文件保存了主机名和对应地址的关系，在Linux中，文件在/etc/hosts。随着大量主机接入互联网后，在本地维护这样的数据库，已经是很困难了，于是IANA建立了一台ftp服务器，任何主机需要使用地址和名称解析时，向它请求，访问成功后，写入一个公共的host文件中。当本地hosts条目过多时，查询的效率就非常低了。于是就本地不在维护host，而改用iana提供的服务器，让服务器直接进行解析，然后返回目标的ip的地址。在服务器上将host文件哈希化保存在内存中，这样查询速度也加快了。当主机增加到百万级别时，一台服务器就无法应对，于是dns进行了分层，将一个大数据库分成了若干个小数据库，dns也就形成了一个倒置的树形结构，dns的根是.，整个树形结构叫做dns的namespace。

直接位于根之下的有7个著名顶级域名(top level domain)，也叫一级域名，简写为tld，这7个顶级域名是：com, edu, mil, gov, net, org, int。顶级域名有三类，有组织域、国家域、反向域。dns的表示是自底向上的，以点号分隔的。实际上一台主机并非直接和dns域内的根通信，而是和指定dns服务器通信，由dns服务器来向根查询并返回结果。

DNS查询类型
递归查询：发出一次请求，得到最终结果
迭代查询：需要发出多次请求

名称服务器：域内负责解析本域内的名称的主机；根服务器在全球有13组服务器

dns既可以把名字解析为ip，也可以把ip解析为名称，但是正反向解析时两个不同的名称空间，是两颗不同的解析树。