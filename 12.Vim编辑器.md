# Vim编辑器

Vim是一个全屏，模式化的文本编辑器

## Vim的模式

常见的有三种，编辑模式/命令模式，输入模式/插入模式，末行模式

打开一个文件默认处于编辑模式

### 模式转换

- 编辑模式转到到输入模式
  - i：在当前光标所在字符的**前面**转为输入模式
  - a：在当前光标所在字符的**后面**转为输入模式
  - o：在当前光标所在行的下方新建一行并转为输入模式
  - I：在当前光标所在行的行首，转换为输入模式
  - A：在当前光标所在行的行尾，转换为输入模式
  - O：在当前光标所在行的上方新建一行并转为输入模式
- 输入模式转到编辑模式：ESC键
- 编辑模式转到末行模式：键入：
- 末行模式转到编辑模式：ESC键（有些情况可能要按两次ESC键）

注意：输入模式和末行模式不能直接转换

## 打开文件并快速定位光标

- 打开文件使用vim path/to/FILENAME


vim **+n**  path/to/FILENAME打开文件光标处在第n行

vim **+**  path/to/FILENAME打开文件光标处在文档末行

vim **+/pattern** path/to/FILENAME打开文件定位在被pattern匹配到的行首

## 关闭文件

一般在编辑模式或者末行模式下完成文件的关闭

在末行模式下：wq（x）保存并退出，q退出，q！不保存并退出，w保存， w！强行保存（管理员）。

在编辑模式下：ZZ保存退出

## 移动光标（编辑模式）

### 逐字符移动

- h向左



- l向右



- j向下



- k向上


nh移动n个字符

### 逐个单词移动

- w移动到下一个单词的词首


- e移动到当前或下一个单词的词尾


- b移动到当前会前一个单词的词首

可以和数字组合使用

### 行内移动

- 0：跳转至行首（绝对行首）
- ^：跳转到行内第一个非空白字符
- $：绝对行尾

### 行间跳转

- nG直接跳转到第n行
- G跳转到最后一行

末行模式跳转，直接输入行号

## 翻屏（编辑模式）

- CTRL+f向文件下翻一屏
- CTRL+b向文件上翻一屏
- CTRL+d向文件下翻半屏
- CTRL+u向文件上翻半屏

## 删除单个字符：x

使用x删除光标所在处的单个字符，和数字使用代表删除光标所在处以及向后的共数字个字符

## 删除命令：d

d命令和跳转命令组合使用，dw，de，db

\#d跳转命令

删除当前光标所在行dd

\#dd删除包括当前光标所在行在内的\#行

在末行模式下 开始地址 结束地址d，从开始地址到第结束地址的所有行

.表示当前行$最后一行 +#向下的#行

## 粘贴命令

P：如果删除或复制的为整行内容，则粘贴至光标所在行的上方；如果删除或复制的为非整行内容，则粘贴至光标所在字符的前面

p：如果删除或复制的为整行内容，则粘贴至光标所在行的下方；如果删除或复制的为非整行内容，则粘贴至光标所在字符的后面

## 复制命令y

用法同d命令

## 先删除内容再转换为输入模式（修改）

c的用法同d命令

## 替换单个字符r

R替换模式，esc退出替换模式，在替换模式下可以替换多个字符

## 撤销编辑

u，撤销前一次编辑操作

\#u直接撤销最近#次编辑

撤销最近一次撤销CTRL+r

## 重复前一次编辑操作

.

## 可视化模式

v：按字符选取

V：按矩形块选取

## 查找

/pattern从文件首部到尾部查找

?pattern从当前光标到文件首部查找 n从上到下  N从下到上查找

## 查找并替换

在末行模式下使用s命令，用法同sed

## 使用vim编辑多个文件

vim FILE1 FILE2 FILE3

:next 切换到下一个文件

:prev切换至前一个文件

:last 切换至最后一个文件

:first切换至第一个文件

退出

:qa 全部退出

## 分屏显示一个文件

Ctrl+w，s水平拆分窗口

Ctrl+w，v垂直拆分窗口

在窗口间切换光标

Ctrl+w，ARROW

:qa 关闭所有窗口

## 分窗口编辑多个文件

vim -o 水平分割显示

vim -O 垂直分割显示

## 将当前文件的中部分内容另存为另外一个文件

在末行模式下使用w命令

:w

:ADDR1,ADDR2w /path/to/somewhere

## 将另外一个文件的内容填充在当前文件中

:r /path/to/somefile

## 和shell交互

:！COMMAND

## 高级话题

1显示或取消显示行号

:set number

: set nu

:set nonu

2显示忽略或区分字符大小写

:set ignorecase

:set ic

:set noic

3设定自动缩进

:set autoindent

:set ai

:set noai

4查找的文本高亮显示或取消

:set hlsearch

:set nohlsearch

5语法高亮

:syntax on

:syntax off

## 配置文件

/etc/vimrc

~/.vimrc