# Linux权限及权限管理

在Linux每个文件都定义了三种用户(属主，属组，其他)并分配了三种权限（r，w，x）

## chown/chgrp

改变文件属主/属组

`chown USERNAME FILENAME1,FILENAME2`

只有管理员可以改变文件属主/属组

- -R修改目录及其内部文件的属主
- --reference=/path/to/file /path/to/file1,file2把file1，file2的属主和属组修改成file的属主和属组

chown USERNAME:GRPNAME FILE1，FILE2 同时改变文件属主和属组

chown :GRPNAME FILE1，FILE2 改变文件属组

## chmod

修改文件权限

**修改三类用户的权限**

chmod 644 FILENAME1,FILENAME2,......

- -R 递归修改目录下所有文件的权限
- --reference=/path/to/file FILENAME1,FILENAME2,......

**修改某类或某些类用户权限**

chmod 用户类别=MODE file1，file2,... ...

`chmod u=rwx /tmp/abc`

`chmod o=rx /tmp/abc`

`chmod g,o=rw /tmp/abc`

`chmod g=rx,o= /tmp/abc`

**修改某类用户某位或某些位权限**

chmod 用户类别+/-MODE file1，file2,... ...

`chmod u-x /tmp/abc`

`chmod u+x,g-x /tmp/abc`

`chmod +x /tmp/abc`三类用户同时加上执行权限

`chmod u-wx /tmp/abc`

## 默认权限

管理员的默认文件权限为644，目录的默认权限为755

普通用户的默认文件权限为664，目录的默认权限为775

文件默认权限是由遮罩码umask计算出来的，管理员的umask是022，普通用户的umask是002

创建文件的默认权限666-umask

创建目录的默认权限777-umask

文件默认一定没有执行权限，如果算得的结果有执行权限则将其权限组整体加1

umask也可以自行设定

shell分为登录式shell和非登录式shell

登录式shell是正常通过某终端的shell或者使用su -/-l USERNAME命令切换的shell

非登录式shell是使用su USERNAME登录的shell或者在图形终端中打开的命令窗口、自动指向的shell脚本

**bash的配置文件**

全局配置

/etc/profile,/etc/profile.d/*.sh,/etc/bashrc

个人配置

~/.bash_profile,~/.bashrc

profile类的文件：设定环境变量；运行命令或脚本

bashrc类的文件：设定本地变量；定义命令别名

登录式shell如何读取配置文件？

/etc/profile-->/etc/profile.d/*.sh-->~/.bash_profile-->~/.bashrc-->/etc/bashrc

非登录式shell读取配置文件过程

~/.bashrc-->/etc/bashrc-->/etc/profile.d/*.sh