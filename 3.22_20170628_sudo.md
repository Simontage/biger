# sudo和网络文件共享

切换用户使用su或su -，su只是切换到root身份，shell环境仍然是普通用户的shell，su -是用户和shell环境都切换到了root。使用-c COMMAND可以变更为使用者的身份并且执行指令后变回原来的使用者。使用-l选项表示改变身份时，也同时变更工作目录，以及HOME、SHELL、USER、logname，此外也会变更PATH环境变量。

sudo可以让某用户不需要管理员的密码，就可以拥有管理员的权限。sudo是一种授权机制，授权之后能够让某用户以另外一个用户的身份运行命令。sudo的配置文件是/etc/sudoers。也可以使用visudo来编辑配置文件。授权在配置文件中以类似`root    ALL=(ALL)       ALL`的格式进行授权，也可以对用户组进行授权。其中第一个字段user是运行命令者的身份，第二字段host是通过哪些主机，等号右侧ranas表示以哪个用户的身份运行，第三个字段command表示可以运行哪些命令。

user host=(runas) commands

user可以使用username、#uid、user_alias、%group、%#gid等；host可以使用ip、hostname、network等；command可以使用command name、directory

在配置文件中，指定用户别名User_Alias USERNAME = 1user，2user，...，其中定义的用户名必须为大写字母，可以把这个看作为定义的一个用户组。指定命令别名Cmnd_Alias COMMANDS = command1，command2，这可以看做命令的集合。Alias_Type有User_Alias、Host_Alias、Runas_Alias、Cmnd_Alias。

用户在使用sudo时，需要验证当前用户的密码，sudo有检票时间，检票时间的有效时长是5分钟，如果5分钟之内都没执行sudo，再次执行sudo需要输入用户密码。使用sudo -k清除检票记录的用户密码。sudo默认以root身份运行命令，也可以使用sudo -u user来指定以哪个用户运行命令。

对于一些没有root密码的管理员，可以使用sudo su -来切换到root用户。

对于sudo授权，如果要对用户授权关于密码的操作，那么要禁止用户修改管理员密码，定义一个Cmnd_alias=/usr/bin/passwd [a-z]*,!/usr/bin/passwd root

sudo的所有操作会记录在日志中。

