# shell编程

计算机执行需要机器语言，人和计算机之间的翻译官叫做编译器或者叫做解释器，这取决于你使用的语言类型。计算机语言分为**机器语言**、**汇编语言**，**高级语言**（接近于人类的自然语言）。在高级语言中又分为静态语言（编译型语言）和动态语言（解释型语言）。通常情况下，编译型语言通常是强类型（变量），解释型通常是弱类型（变量）。静态语言需要事先转换为可执行格式，动态语言边解释边执行。常见的静态语言有C，C++,Java，C#;动态语言有php，shell，python，perl。

编程模型分为**面向过程**和**面向对象**

## 变量和变量类型

变量是**内存空间**，内存空间是由名称的，内存是编址的存储单元，每一个内存单元都有全局唯一的编址

先看一个例子，你要在内存中存储一个字符串10和一个数字10，它们需要的内存空间大小会一样么？如果是字符串那在计算机中要使用ASCII码来表示，那么字符串10需要占用内存16位2字节的空间，而数字10转换为二进制位1010，但是计算机最小内存单元是字节，所以数字10占用8位1字节的内存空间。

从上面的例子不难看出，需要指定变量类型，变量类型直接决定的了变量的存储的格式和长度

常见的变量类型有

- 字符


- 数值：整型和浮点型
- 真、假


对于强类型的语言在变量使用前，必须事先声明，甚至还需要初始化

对于弱类型语言，直接使用，甚至不区分变量类型

**变量赋值**

变量名=值

## bash的变量类型

- 环境变量：作用域为当前shell进程及其子进程
- 本地变量（局部变量）：是进程的变量，进程结束后，变量存储的值也会消失。
- 位置变量 
- 特殊变量：保存特殊变量。**$?**表示上一个命令执行状态返回值

引用变量\${VARNAME},括号可以省略，但如果涉及到改变变量内容的时候括号不可以省略，如a=pig ${a}s变量为pigs，此时括号不可省略

定义局部变量**local** VARNAME=VALUE,作用域为当前代码段

本地变量的作用域为bash进程

定义环境变量使用**export** VARNAME=VALUE

脚本在执行时会启动一个子shell进程。命令行中启动的脚本会继承当前shell的环境变量，系统自动执行的脚本（非命令行启动）就需要自我定义需要的各种环境变量。

程序执行可能会有两种返回值，**执行结果**和**程序状态返回代码**（0-255）。0表示正确执行，1-255是错误执行，其中1，2，127是系统系统预留，其他用户可自定义

有时只需要命令的程序状态返回码，并不需要程序的执行结果，可以使用重定向到/dev/null目录下，这个目录是软件设备目录页称为数据黑洞

**撤销变量**

unset 变量名称

查看当前shell的所有变量`set`

查看当前shell的环境变量`printenv` `env` `export`

增加变量的内容a=1，a=$a:1 

## 脚本

一般来说是命令的堆砌，按实际需要，结合命令流程控制机制的源程序

脚本的第一行\#!/bin/bash

以#开头是注释行，不执行

加执行权限后，指定路径执行，也可以不加执行权限，使用指定解释器，bash ./test.sh

### 练习

#### 练习一

添加5个用户为user1......user5;每个用户的密码同用户命，添加密码完成后不显示passwd命令的执行结果信息；每个用户添加完成后，都要显示用户某某已经添加成功

