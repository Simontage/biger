#  grep和正则表达式

## grep和正则表达式

### grep

根据基本正则表达式定义的**模式**搜索文本并将符合模式的**文本行**显示出来，还有egrep和fgrep

模式（pattern）：文本字符和正则表达式的元字符组合而成的匹配条件

grep [OPTION] PATTERN [FILE...]

grep 'root' /etc/passwd

匹配部分，显示整行

- -i 忽略大小写
- --color把匹配的字符高亮显示    alias grep=‘grep --color’
- -v 反向查找，显示没有被匹配到的行
- -o 只显示被模式匹配的**字符串**，每个串显示为一行
- -E使用扩展正则表达式
- -A 数值：显示匹配的行，并显示其下面指定行数
- -B 数值：显示匹配的行，并显示其前面指定行数
- -C 数值：显示匹配的行，并显示前后各制定的行数

### 正则表达式

#### 元字符

- **.**匹配任意单个字符



- **[]**匹配制定范围内的任意单个字符      字符集合：\[:digit:\] ,\[:lower:\] ,\[:upper:\] ,\[:punct:\] ,\[:space:] ,\[:alpha:\] ,\[:alnum:] 匹配以数字结尾的行 grep ‘[[:digit:]]$' /etc/inittab



- **\[^]**匹配指定范围外的任意单个字符



- **\\(\\)**：分组         \\(ab\\)*表示ab可以出现1次，0次或者任意次


​        后向引用:\1 第一个左括号与之对应的右括号所包括的所有内容

​    He love his lover.  She like her liker. He love his liker. She like her lover.

​    grep '\\(l..e\\).*\1' test1.txt

**匹配次数**(贪婪模式)

- ***** ：匹配其前面的字符**任意**次



- **.*** ：匹配任意长度的任意字符



- **\?** ：匹配其前面的字符1次或0次



- **\\{m,n\\}**匹配其前面的字符至少m次，至多n次     \\{1,\\}至少一次     \\{0,3\\}最多三次


**位置锚定**

- **^**：锚定行首，此字符后面的任意内容必须出现在行首。**^r..t**指的是以r..t出现的内容必须在行首



- **$**：锚定行尾，此字符前面的任意内容必须出现在行尾  ^y表示已y结尾的行  b..h\$



- **^$**：匹配空白行



- **\\<或\\b**:锚定词首，其后面的任意内容必须作为单词的首部出现 grep ‘\\<root’ /passwd



- **\\>或\\b**:锚定词尾，其前面的任意内容必须作为单词的尾部出现 grep 'root\\>' /passwd


**举例：**

a,b,ab,aab,acb,adb,amnb,amnbmnbmnbmnb

**a*b**:b,ab,aab

**a.*b**:ab,aab,acb,adb,amnb,amnbmnbmnbmnb

**a?b**:b,ab,aab,acb,adb,amnb,amnbmnbmnbmnb

**a\\{1,3\\}b**:a,aab

**a.\\{1,3\\}b**:aab,acb,adb,amnb,**amnb**mnbmnbmnb

## egrep和扩展正则表达式

**字符匹配**

- **.**


- **[]**


- **[^]**

**次数匹配**

- *


- ?


- +：匹配其前面的字符至少一次


- {m,n}

**位置锚定**

- ^
- $
- \\<
- \\>

**分组**

()

引用\1,\2,\3

**或者**

|：or      C|cat 表示的是C或者cat           (C|c)at表示的是Cat或者cat

## fgrep

不支持正则表达式，搜索速度快