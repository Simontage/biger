# 文件管理-2

## 查看文本文件的内容

### cat和tac

连接并显示，完全显示，从首部向尾部显示。单独使用cat时，cat的作用是从标准输入读取内容并显示到标准输出，终止命令使用组合键ctrl+c

- -n：对每一行进行编号（显示行号）
- -E：显示每行的行结束符，用**$**表示
- -A：显示所有内容（各种控制符，制表符，非打印内容）

tac则是连接并显示，完全显示，但**从尾部向首部显示**

### 分屏显示

对于文件行数非常多的文件，使用cat命令是不合适的，因为内存并不能完全存储所有已经输出的内容，这时就要使用分屏显示----more和less命令

#### more

空格键：向后翻一屏

B：向前翻一屏

回车：向后一行

最后一屏自动退出

#### less

空格键：向后翻一屏

B：向前翻一屏

回车：向后一行

k：向前一行

还可以查找文本

使用q退出

### 查看文件首部n行或尾部n行----head和tail

-n：默认为10行，也可以直接-行数，如-2

tail有一个特殊选项-f，命令执行后不会退出，等待显示后追加至此文件的最新内容，退出使用ctrl+c

## 文本处理

### cut

-d指定‘字段’分隔符，默认为空格。例如-d：

-f指定要显示的字段，例如-f1，-f1,3 ，-f1-3

cut  -d: -f1  /etc/passwd

### 流编辑器sed

#### 基本用法

将符合模式的行读入**模式空间**中，处理后输出到屏幕

这段内存空间叫做**模式空间**

逐行处理，默认并不处理原文件，仅对模式空间中的数据处理，处理结束后，将模式空间打印到屏幕

一般使用方法：`sed [Options] 'AddressCommand' FILE1,...`

##### Address

1. StartLine,EndLine eg. 1,100;\$表示最后一行
2. /Regexp/ eg. /^root/
3. /pattern1/,/pattern2/表示第一次被模式1匹配到的行开始至第一次被模式2匹配到的行结束，这中间的所有行
4. LineNum表示指定的行
5. StartLine，+N表示从StartLine开始向后的N行

##### Command

- d：删除符合条件的行

  `sed '1,2d' /etc/fstab`, `sed '3,$d' /etc/fstab`,` sed '/oot/d' /etc/fstab`,`sed '1,+2d' /etc/fstab` ,`sed '1d' /etc/fstab `

- p：显示符合条件的行

- a  \string：在指定的行后面追加新的行，内容为string

- i \string：在指定的行前面添加新行，内容为String

- r Filename：将指定的文件的内容添加至符合条件的行后

- w Filename：将address指定的范围内的内容另存至指定的文件中`sed '/oot/ w /tmp/oot.txt' /etc/fstab`

- s/pattern/string/修饰符：查找并替换，默认只替换每行中第一次被模式匹配到的字符串

  只要三个相同的符号就可以，比如s@@@，s###

  修饰符

  g:全局替换

  i:忽略字符大小写

  ​

##### 选项

- -n：静默模式，指的是不显示模式空间中的内容



### awk

### join

## 文本排序

使用sort命令，不影响源文件的次序，只是影响显示的次序,默认根据asikc码升序排列。eg. sort /etc/fstab 

- -n 使用数值大小排序
- -r 降序排列
- -t 字段分隔符
- -k 指定以哪一个字段为准进行排序 
- -u 排序后相同的行只显示一次，-u选项可以和uniq合用
- -f 排序时忽略字符大小写



uniq的使用

报告重复行或略过重复的行，这里要注意一点无论是sort还是uniq，如果两行不相邻，即使是相同的，也不认为是相同的。

- -d 只显示重复的行
- -D 显示所有重复的行
- -c 显示每一行重复的次数

## 文本统计

使用wc（word count）命名可以进行文本统计

- -l 只显示行数
- -c 显示字节数
- -m 显示字符数
- -L  显示最长的一行包含的字符数

## 字符处理

使用tr用于实现转换或删除字符，tr [OPTION]...SET1 [SET2]  tr ‘ab’ ‘AB’ > /etc/passwd

- -d 删除字符 tr -d ‘ab’ 把a和b都删除



