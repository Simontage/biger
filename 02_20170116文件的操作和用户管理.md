# 文件操作和用户管理

## linux文件类型

一块硬盘就像一个大的仓库，如果没有一个行之有效的管理方法的话，仓库就会混乱，效率低下，硬盘也是一样的，操作系统通过格式化硬盘建立起文件系统以便文件的管理。文件系统将硬盘分为两个部分，一部分是文件元数据区，另一部分是文件内容的存储。文件的元数据一般有文件时间戳，权限，大小，类型和位置等。

在linux中有一切皆文件的理念，必然有不同的文件类型，常见的有普通文件，目录文件，链接文件，设备文件和命令管道，套接字文件。

**普通文件**以-或者f表示，是linux中最常见的文件类型，需要和windows区别的是：win是以文件后缀名来识别文件类型的，而linux中可以使用`file 文件`来查看文件内容类型。

**目录文件**是一种特殊的文件，实际上路径的映射，使用d表示，需要注意的是在linux中文件名和目录名不能相同

**链接文件**与windows中的快捷方式相似，软连接使用l表示，除了软连接还有硬链接

**设备文件**分为块设备文件和字符设备文件，字符设备使用c表示，块设备使用b表示

**套接字文件**在网络通信中常使用

**命名管道文件**以p表示

## 文件时间戳

文件时间戳是文件元数据之一，文件时间戳有三种时间：访问时间，修改时间和改变时间。

**访问时间**是对文件访问时的时间，如打开文件

**修改时间**是对文件内容的编辑包括新增，修改，删除等操作

**改变时间**是文件元数据的更改时间。改变时间可以随着修改时间的改变而改变

## ls和echo命令

ls用以列出目录中的文件，直接使用ls命令可以列出当前所在目录的文件

|   选项    | 作用               |
| :-----: | :--------------- |
|   -l    | 长选项              |
|   -h    | 以人类可读的文件大小显示     |
|   -a    | 显示全部文件           |
|   -d    | 显示目录自身属性         |
|   -r    | 逆序显示             |
| --color | 显示颜色             |
|   -i    | 显示innode  number |

用长选项列出的目录显示如下：

drwxr-xr-x. 2 simon simon   6 Oct  8 13:28 Documents

其中d代表文件类型，此例中是目录，后面的rwxr-xr-x表示文件权限，2表示硬链接数，后面的simon分别表示文件的属主和属组，时间是最后一次的修改时间，如果是链接文件还会有链接文件指向原始文件的表示

此外还可以安装tree命令，树型显示目录

[simon@localhost ~]$ tree
.
├── Desktop
├── Documents
├── Downloads
│   └── VNC-6.0.1-Linux-x64-RPM.tar.gz
├── ProjectA
│   └── HelloWorld.py
├── Public
├── redirect
│   ├── errors.log
│   └── students.txt
└── Videos

echo可以输出字符提示，使用-e选项可以支持控制符

常见的控制符

|  控制符  | 作用                                       |
| :---: | :--------------------------------------- |
|  \n   | 换行                                       |
|  \t   | 水平制表符                                    |
|  \v   | 垂直制表符                                    |
|  \b   | 退格，删除一个字符，可以多个使用                         |
| \ONNN | 常用的是\033控制终端文本的显示颜色 echo -e "\033[31mAAAAAA\033[0m" |

 echo -e "\033[31mAAAAAA\033[0m"中[31数字3表示前景色，4表示背景色，第二个数字用来控制颜色，有1-7可选，后面的\033[0m是颜色结束的控制

-n选项不自动换行，echo默认输出完成后会自动换行

## bash命令别名

命令别名是bash的特性之一，可以通过命令别名来设定特定命令和选项组合，使用命令别名可以提高效率。常见的ls就是命令别名，ls执行的实际是ls --color=auto

使用alias命令可以查看当前shell中已经定义的命令别名

创建别名使用 alias=‘原始命令‘，取消别名使用unalias 别名

需要注意的是，如果是在当前shell中新定义的别名，会随着当前进程的结束而失去定义，想要持续生效需要写入配置文件中

在命令别名前加上\则使用命令本身，而不是别名 

## 文本文件的查看

文本文件查看常用的命令有cat，tac，more，less，head，tail

cat是连接并显示的意思，可以显示一个或多个文件并输出到标准输出上（显示器）

在显示的过程中，可以根据一些控制符来对输出的样式进行更改，比如最简单的换行

|  选项  | 作用               |
| :--: | :--------------- |
|  -E  | 显示行结束符$          |
|  -v  | 显示非打印字符          |
|  -e  | 等同于-Ev           |
|  -n  | 显示每行             |
|  -s  | 将多个连续的空白行合并显示为一行 |

tac则是逆序显示文件

more和less也是文本查看的常用命令，区别在于more命令在翻页至文档尾部会自动退出，less可以随意翻页，使用q退出文本查看

head和tail用来查看文本文件的头几行和最后几行，默认显示为10行，可以使用选项`-n 数字`来自定义显示行数

tail还有一个选项是-f，执行后会持续监测文件如果文档尾部有新的内容，则会向屏幕输出

##文件的创建移动复制和删除

### 文件的复制

cp是命令别名 cp -i与-f合用-f无效，

|  选项  | 作用                           |
| :--: | :--------------------------- |
|  -r  | 递归                           |
|  -i  | 交互式操作                        |
|  -a  | -dr并且保留源文件的文件信息              |
|  -d  | 当源文件是链接文件时，复制链接文件本身，而非指向的源文件 |
|  -p  | 保持原有属性 只有管理员可以操作             |
|  -f  | 强制执行                         |

### 文件的移动和删除

mv移动文件，用法和cp相近，mv可以直接移动目录，不需要递归选项，同一目录下操作是文件名更改的操作

rm移除文件，命令别名，不能删除非空目录，-r递归删除 -rf，f强制生效

### 空文件的创建

修改文件时间戳，access time modify time change time

## bash的文件名通配globbing

*：匹配任意长度的任意字符

？：匹配任意单个字符

[]：集合通配符，匹配指定字符范围内的**任意单个**字符，通配符并不区分大小写

​	常见的字符范围

​	[[:upper:]]大写字母

​	[[:lower:]]小写字母

​	[[:alpha:]]所有字母

​	[[:digit:]]数字

​	[[:alnum:]]数字和字母

​	[[:space:]]空格

​	[[:punct:]]标点符号

​	使用^可以匹配指定字符范围外的任意字符

